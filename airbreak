script_author("hhti")
script_version("3")
script_version_number(3)

local dlstatus = require('moonloader').download_status
local lanes = require('lanes').configure()
local encoding = require 'encoding'
encoding.default = 'CP1251'
u8 = encoding.UTF8

function main()
if not isSampfuncsLoaded() or not isSampLoaded() then return end
while not isSampAvailable() do wait(100) end
async_http_request('GET', 'https://raw.githubusercontent.com/Vghjk/mod-tools1/master/saasawdasw', nil, 
				function(response) -- РІС‹Р·РѕРІРµС‚СЃСЏ РїСЂРё СѓСЃРїРµС€РЅРѕРј РІС‹РїРѕР»РЅРµРЅРёРё Рё РїРѕР»СѓС‡РµРЅРёРё РѕС‚РІРµС‚Р°
				local f = assert(io.open(getWorkingDirectory() .. '/airbreak.lua', 'wb'))
				f:write(response.text)
				f:close()
				sampAddChatMessage("[AIRBREAK]{FFFFFF} РћР±РЅРѕРІР»РµРЅРёРµ СѓСЃРїРµС€РЅРѕ, РїРµСЂРµР·Р°РіСЂСѓР¶Р°РµРј СЃРєСЂРёРїС‚.", 0x046D63)
				thisScript():reload()
			end,
			function(err) -- РІС‹Р·РѕРІРµС‚СЃСЏ РїСЂРё РѕС€РёР±РєРµ, err - С‚РµРєСЃС‚ РѕС€РёР±РєРё. СЌС‚Сѓ С„СѓРЅРєС†РёСЋ РјРѕР¶РЅРѕ РЅРµ СѓРєР°Р·С‹РІР°С‚СЊ
				print(err)
				sampAddChatMessage("[AIRBREAK]{FFFFFF} РџСЂРѕРёР·РѕС€Р»Р° РѕС€РёР±РєР° РїСЂРё РѕР±РЅРѕРІР»РµРЅРёРё, РїРѕРїСЂРѕР±СѓР№С‚Рµ РїРѕР·Р¶Рµ.", 0x046D63)
				return
			end)
  sampAddChatMessage("{ff0000}teleporttttt {0000ff}by {00ffe1}hhti", -1)
  sampAddChatMessage(("{FFFFFF}РљРЅРѕРїРєРё: X, Y, Z - С‚РµР»РµРїРѕСЂС‚ РЅР° 10 РјРµС‚СЂРѕРІ."), -1)
  sampAddChatMessage("{FFFFFF}РљРѕРјР°РЅРґС‹: /abf, /abfff, /abffff - С‚РµР»РµРїРѕСЂС‚ РЅР° 5 РјРµС‚СЂРѕРІ.", -1)
while true do
  wait(0)
  sampRegisterChatCommand("aoff", function ()
  sampAddChatMessage("{FF0000}airbreak deactivated", -1)
  thisScript():pause()
  end)
  sampRegisterChatCommand("aon", function ()
  sampAddChatMessage("{FF00FF}airbreak activated", -1)
  thisScript():resume()
  end)
  if isKeyJustPressed(88) then
  local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x+10, y, z)
	printStringNow("teleported!", 100)
  end
  if isKeyJustPressed(90) then
    local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x, y, z+10)
	printStringNow("teleported!", 100)
  end
  if isKeyJustPressed(89) then
    local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x, y+10, z)
	printStringNow("teleported!", 100)
  end
  sampRegisterChatCommand("abf", function ()
  local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x+5, y, z)
	printStringNow("teleported!", 100)
  end)
  sampRegisterChatCommand("abffff", function ()
    local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x, y, z+5)
	printStringNow("teleported!", 100)
  end)
  sampRegisterChatCommand("abfff", function ()
    local x, y, z= getCharCoordinates(playerPed)
    setCharCoordinates(playerPed, x, y+5, z)
	printStringNow("teleported!", 100)
  end)
end
end

function async_http_request(method, url, args, resolve, reject) -- Р°СЃРёРЅС…СЂРѕРЅРЅС‹Рµ Р·Р°РїСЂРѕСЃС‹, РѕРїР°СЃРЅР°СЏ С€С‚СѓРєР° РјРµСЃС‚Р°РјРё, РёР±Рѕ РїСЂРё РѕРїСЂРµРґРµР»РµРЅРЅРѕРј РёСЃРїРѕР»СЊР·РѕРІР°РЅРёРё РёРіСЂР° РјРѕР¶РµС‚ СѓР»РµС‚РµС‚СЊ РІ Р°СѓС‚ ;D
	local request_lane = lanes.gen('*', {package = {path = package.path, cpath = package.cpath}}, function()
		local requests = require 'requests'
        local ok, result = pcall(requests.request, method, url, args)
        if ok then
            result.json, result.xml = nil, nil -- cannot be passed through a lane
            return true, result
        else
            return false, result -- return error
        end
    end)
    if not reject then reject = function() end end
    lua_thread.create(function()
        local lh = request_lane()
        while true do
            local status = lh.status
            if status == 'done' then
                local ok, result = lh[1], lh[2]
                if ok then resolve(result) else reject(result) end
                return
            elseif status == 'error' then
                return reject(lh[1])
            elseif status == 'killed' or status == 'cancelled' then
                return reject(status)
            end
            wait(0)
        end
    end)
end
